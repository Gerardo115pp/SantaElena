<script>
    import { createEventDispatcher } from "svelte";
    import { Writable } from "svelte/store";

    export let aria_label = "Navigation menu";

    const dispatch = createEventDispatcher();

    /** @type {Writable<boolean>} */
    export let is_opened;

    const click_handler = () => {
        dispatch('click');
    }

</script>

<svg class="libery-burger-btn" on:click={click_handler} role="button" tabindex="0" aria-label="{aria_label}" viewBox="0 0 30 26" fill="none">
    <path class:x-diagonal={$is_opened} d="M27.3516 2.47852C27.8906 2.52539 28.2773 2.61914 28.5117 2.75977C28.7695 2.87695 28.9453 3.0293 29.0391 3.2168C29.1328 3.38086 29.168 3.56836 29.1445 3.7793C29.1211 3.9668 29.1094 4.16602 29.1094 4.37695C28.5 4.63477 27.7266 4.83398 26.7891 4.97461C25.875 5.11523 24.8555 5.2207 23.7305 5.29102C22.6289 5.36133 21.4805 5.4082 20.2852 5.43164C19.0898 5.43164 17.9297 5.43164 16.8047 5.43164C15.7031 5.43164 14.6602 5.43164 13.6758 5.43164C12.7148 5.43164 11.918 5.45508 11.2852 5.50195C9.36328 5.61914 7.86328 5.73633 6.78516 5.85352C5.70703 5.9707 4.95703 6.08789 4.53516 6.20508C3.83203 6.1582 3.28125 6.06445 2.88281 5.92383C2.48438 5.7832 2.15625 5.60742 1.89844 5.39648C1.64062 5.18555 1.41797 4.95117 1.23047 4.69336C1.04297 4.43555 0.820312 4.16602 0.5625 3.88477C0.703125 3.69727 0.726562 3.42773 0.632812 3.07617C0.539062 2.72461 0.328125 2.45508 0 2.26758C0.257812 2.24414 0.457031 2.11523 0.597656 1.88086C0.738281 1.62305 0.75 1.43555 0.632812 1.31836C1.21875 1.22461 1.83984 1.17773 2.49609 1.17773C3.17578 1.1543 3.84375 1.13086 4.5 1.10742C5.15625 1.08398 5.77734 1.04883 6.36328 1.00195C6.94922 0.955078 7.46484 0.861328 7.91016 0.720703C9.73828 0.720703 11.6367 0.708984 13.6055 0.685547C15.5742 0.662109 17.4141 0.638672 19.125 0.615234C19.7344 0.732422 20.4492 0.802734 21.2695 0.826172C22.1133 0.849609 22.9336 0.896484 23.7305 0.966797C24.5508 1.03711 25.2891 1.17773 25.9453 1.38867C26.6016 1.59961 27.0703 1.96289 27.3516 2.47852Z"/>
    <path class:into-oblivion={$is_opened} d="M27.3516 12.0684C27.8906 12.1152 28.2773 12.209 28.5117 12.3496C28.7695 12.4668 28.9453 12.6191 29.0391 12.8066C29.1328 12.9707 29.168 13.1582 29.1445 13.3691C29.1211 13.5566 29.1094 13.7559 29.1094 13.9668C28.5 14.2246 27.7266 14.4238 26.7891 14.5645C25.875 14.7051 24.8555 14.8105 23.7305 14.8809C22.6289 14.9512 21.4805 14.998 20.2852 15.0215C19.0898 15.0215 17.9297 15.0215 16.8047 15.0215C15.7031 15.0215 14.6602 15.0215 13.6758 15.0215C12.7148 15.0215 11.918 15.0449 11.2852 15.0918C9.36328 15.209 7.86328 15.3262 6.78516 15.4434C5.70703 15.5605 4.95703 15.6777 4.53516 15.7949C3.83203 15.748 3.28125 15.6543 2.88281 15.5137C2.48438 15.373 2.15625 15.1973 1.89844 14.9863C1.64062 14.7754 1.41797 14.541 1.23047 14.2832C1.04297 14.0254 0.820312 13.7559 0.5625 13.4746C0.703125 13.2871 0.726562 13.0176 0.632812 12.666C0.539062 12.3145 0.328125 12.0449 0 11.8574C0.257812 11.834 0.457031 11.7051 0.597656 11.4707C0.738281 11.2129 0.75 11.0254 0.632812 10.9082C1.21875 10.8145 1.83984 10.7676 2.49609 10.7676C3.17578 10.7441 3.84375 10.7207 4.5 10.6973C5.15625 10.6738 5.77734 10.6387 6.36328 10.5918C6.94922 10.5449 7.46484 10.4512 7.91016 10.3105C9.73828 10.3105 11.6367 10.2988 13.6055 10.2754C15.5742 10.252 17.4141 10.2285 19.125 10.2051C19.7344 10.3223 20.4492 10.3926 21.2695 10.416C22.1133 10.4395 22.9336 10.4863 23.7305 10.5566C24.5508 10.627 25.2891 10.7676 25.9453 10.9785C26.6016 11.1895 27.0703 11.5527 27.3516 12.0684Z"/>
    <path class:x-diagonal-inverse={$is_opened} d="M27.3516 21.6582C27.8906 21.7051 28.2773 21.7988 28.5117 21.9395C28.7695 22.0566 28.9453 22.209 29.0391 22.3965C29.1328 22.5605 29.168 22.748 29.1445 22.959C29.1211 23.1465 29.1094 23.3457 29.1094 23.5566C28.5 23.8145 27.7266 24.0137 26.7891 24.1543C25.875 24.2949 24.8555 24.4004 23.7305 24.4707C22.6289 24.541 21.4805 24.5879 20.2852 24.6113C19.0898 24.6113 17.9297 24.6113 16.8047 24.6113C15.7031 24.6113 14.6602 24.6113 13.6758 24.6113C12.7148 24.6113 11.918 24.6348 11.2852 24.6816C9.36328 24.7988 7.86328 24.916 6.78516 25.0332C5.70703 25.1504 4.95703 25.2676 4.53516 25.3848C3.83203 25.3379 3.28125 25.2441 2.88281 25.1035C2.48438 24.9629 2.15625 24.7871 1.89844 24.5762C1.64062 24.3652 1.41797 24.1309 1.23047 23.873C1.04297 23.6152 0.820312 23.3457 0.5625 23.0645C0.703125 22.877 0.726562 22.6074 0.632812 22.2559C0.539062 21.9043 0.328125 21.6348 0 21.4473C0.257812 21.4238 0.457031 21.2949 0.597656 21.0605C0.738281 20.8027 0.75 20.6152 0.632812 20.498C1.21875 20.4043 1.83984 20.3574 2.49609 20.3574C3.17578 20.334 3.84375 20.3105 4.5 20.2871C5.15625 20.2637 5.77734 20.2285 6.36328 20.1816C6.94922 20.1348 7.46484 20.041 7.91016 19.9004C9.73828 19.9004 11.6367 19.8887 13.6055 19.8652C15.5742 19.8418 17.4141 19.8184 19.125 19.7949C19.7344 19.9121 20.4492 19.9824 21.2695 20.0059C22.1133 20.0293 22.9336 20.0762 23.7305 20.1465C24.5508 20.2168 25.2891 20.3574 25.9453 20.5684C26.6016 20.7793 27.0703 21.1426 27.3516 21.6582Z"/>
</svg>

<style>
    @keyframes IntoOblivion {
        0% {
            transform: translateY(0);
            opacity: 1;
        }
        70% {
            transform: translateY(45%);
            opacity: 0;
        }
        100% {
            transform: translateY(100%);
            opacity: 0;
        }
    }

    .libery-burger-btn {
        width: 100%;
        outline: none !important;
        overflow: visible;
    }

    .libery-burger-btn path {
        fill: var(--grey-1);
        transition: all .2s ease-in-out;
        transform-box: fill-box;
        transform-origin: center;
    }

    .libery-burger-btn path.into-oblivion {
        animation-name: IntoOblivion;
        animation-duration: .5s;
        animation-fill-mode: forwards;
    }

    .libery-burger-btn path.x-diagonal {
        transform: translate(0, 175%) rotate(45deg) scale(1.5);
        transition: all .2s ease-in;
    }

    .libery-burger-btn path.x-diagonal-inverse {
        transform: translate(0, -175%) rotate(-45deg) scale(1.5);
        transition: all .2s ease-in;
    }

    .libery-burger-btn:hover path {
        fill: var(--main-5);
    }
</style>